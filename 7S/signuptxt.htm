<!DOCTYPE html>
<html>
<head>
    <title>Happy Maths Signup</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-confirm@3.3.4/dist/jquery-confirm.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-confirm@3.3.4/dist/jquery-confirm.min.css">
    <script type="text/javascript">
        var pwd, classcode;

        function setPwdVar() {
            pwd = document.getElementById("pwdInput").value;
        }
        function setClasscodeVar() {
            classcode = document.getElementById("classcodeinput").value;
        }

        function submitForm() {
            var fileInput = document.getElementById("fileInput");
            var file = fileInput.files[0];

            var reader = new FileReader();
            reader.onload = function(e) {
                var content = e.target.result;
                var lines = content.split('\n');

                lines.forEach(function(line, index) {
                    var user = (index + 1) + line.trim() + classcode;

                    $.ajax({
                        url: 'https://intelligent.games/create_username.php',
                        type: 'post',
                        data: { 'user': user, 'class_code': classcode, 'pwd': pwd },
                        success: function(data){
                            console.log("|" + data.trim() + "|");

                            if (data.trim() == "USERNAME ALREADY PRESENT") {
                                $.alert({
                                    title: "Username already present!",
                                    content: 'Press OK to change your username'
                                });
                            }

                            if (data.trim() == "OK") {
                                $.alert({
                                    title: "User created!",
                                    content: 'Press OK to Finish'
                                });
                            }
                        },
                        complete: function(data){}
                    });

                    $.ajax({
                        url: 'https://ellygames.com/create_username.php',
                        type: 'post',
                        data: { 'user': user, 'class_code': classcode, 'pwd': pwd },
                        success: function(data){
                            console.log("|" + data.trim() + "|");

                            if (data.trim() == "USERNAME ALREADY PRESENT") {
                                $.alert({
                                    title: "Username already present!",
                                    content: 'Press OK to change your username'
                                });
                            }

                            if (data.trim() == "OK") {
                                $.alert({
                                    title: "User created!",
                                    content: 'Press OK to Finish'
                                });
                            }
                        },
                        complete: function(data){}
                    });
                });
            };

            reader.readAsText(file);
        }
    </script>
    <link rel="stylesheet" href="zero1011.css">
    <!--mstheme--><link rel="stylesheet" href="zero1011.css">
    <meta name="Microsoft Theme" content="zero 1011">
</head>
<body onload="FP_preloadImgs(/*url*/'button29.jpg',/*url*/'button2A.jpg')">
    <h1 align="center"><font face="Comic Sans MS">
        <span style="background-color: #0000FF">h</span><span style="background-color: #FF00FF">a</span><span style="background-color: #00FF00">p</span><span style="background-color: #00FFFF">p</span><span style="background-color: #FF0000">y</span>
        <span style="background-color: #008080">m</span><span style="background-color: #F1C40F">a</span><span style="background-color: #3498DB">t</span><span style="background-color: #C0C0C0">h</span><span style="background-color: #800080">s</span> 
        signup</font><font size="1"> </font><font size="2">&nbsp;&nbsp; by
        <a href="https://www.youtube.com/@chairinthewild">@chairinthewild</a> yt</font></h1>
    <form onsubmit="event.preventDefault(); submitForm();">
        <p align="center"><font face="Comic Sans MS">
        <label for="fileInput">Upload .txt file with usernames:</label></font>
        <input type="file" id="fileInput" name="fileInput" accept=".txt">
        <br>
        <label for="pwdInput"><font face="Comic Sans MS">Enter Password:</font></label>
        <input type="text" id="pwdInput" name="pwdInput" onchange="setPwdVar()">
        <br>
        <label for="classcode"><font face="Comic Sans MS">Enter Classcode:</font></label>
        <input type="text" id="classcodeinput" name="classcode" onchange="setClasscodeVar()">
        <br>
        &nbsp;<font size="5" face="Comic Sans MS"><input type="submit" value="Submit"></font></p>
    </form>
    <p align="center"><font face="Comic Sans MS">it just signs u up to
        <a href="https://intelligent.games/">https://intelligent.games/</a></font></p>
    <p align="center"><font face="Comic Sans MS">&nbsp; by
        <a href="https://www.youtube.com/@chairinthewild">@chairinthewild</a> yt
    </font></p>
</body>
</html>
